 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forge Your Alliance - Squad Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Philosopher:wght@400;700&display=swap');
        
        body {
            font-family: 'Philosopher', sans-serif;
            background: linear-gradient(to bottom, #0a0e27, #1a1a2e, #16213e);
            color: #e0e0e0;
            min-height: 100vh;
        }
        
        h1, h2, h3, .cinzel {
            font-family: 'Cinzel', serif;
        }
        
        .glow-text {
            text-shadow: 0 0 20px rgba(100, 181, 246, 0.8), 0 0 40px rgba(100, 181, 246, 0.4);
        }
        
        .gold-text {
            color: #d4af37;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }
        
        .budget-display {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid #d4af37;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }
        
        .category-card {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.95));
            border: 3px solid #334155;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            min-height: 320px;
        }

        .category-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;        /* makes image cover the box completely */
    background-position: center;   /* centers image */
    background-repeat: no-repeat;  /* no repeating */
    opacity: 0.25;                 /* keeps content visible above it */
    transition: opacity 0.3s ease;
    z-index: 0;
}

.category-card:hover .category-bg {
    opacity: 0.4; /* slightly stronger when hovered */
}

        
        .category-sigil-bg {
            position: absolute;
            font-size: 200px;
            opacity: 0.12;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            filter: blur(3px);
        }
        
        .category-card:hover {
            transform: translateY(-12px) scale(1.02);
            border-color: #d4af37;
            box-shadow: 0 15px 50px rgba(212, 175, 55, 0.4);
        }
        
        .category-card:hover .category-sigil-bg {
            opacity: 0.25;
            filter: blur(0px);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            box-shadow: 0 0 20px rgba(100, 181, 246, 0.6);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .btn-back {
            background: linear-gradient(135deg, #475569, #64748b);
        }
        
        .btn-back:hover {
            background: linear-gradient(135deg, #64748b, #94a3b8);
        }
        
        .counter-badge {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            border: 2px solid #60a5fa;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
        }
        
        a.category-card {
            text-decoration: none;
            color: inherit;
            display: block;
        }
    </style>
</head>
<body>
    <!-- Header with Budget -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-black bg-opacity-90 backdrop-blur-sm border-b border-blue-900">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl md:text-3xl font-bold cinzel glow-text">The Long Night</h1>
                <p class="text-sm text-gray-400">Forge Your Alliance</p>
            </div>
            <div class="budget-display px-6 py-3 rounded-lg">
                <p class="text-sm text-gray-400">Treasury</p>
                <p class="text-2xl font-bold gold-text cinzel"><span id="budget">100</span> üí∞</p>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-24" style="padding-top: 8rem;">
        <h2 class="text-4xl md:text-5xl font-bold cinzel text-center mb-4 glow-text">
            Forge Your Alliance
        </h2>
        <p class="text-center text-gray-300 mb-16 text-lg">Assemble your forces to face the Night King</p>

        <div class="grid md:grid-cols-3 gap-8 mb-12 max-w-6xl mx-auto">
            <!-- Characters Card -->
           <a href="./character.html" class="category-card rounded-xl p-8 relative overflow-hidden">
           <div class="category-bg" style="background-image: url('https://i.pinimg.com/736x/9c/77/b4/9c77b4b535c130b05d2e090040f683f6.jpg');"></div>
           <div class="relative z-10">
           <h3 class="text-2xl font-bold cinzel text-center mb-3 gold-text">Characters</h3>
           <p class="text-center text-gray-300 mb-6">Choose 3 heroes from the Great Houses</p>
           <div class="flex justify-center">
           <span class="counter-badge px-6 py-2 rounded-full font-bold" id="character-count">0/3 Selected</span>
           </div>
           </div>
           </a>
    

            <!-- Magical Beings Card -->
            <a href="./magical.html" class="category-card rounded-xl p-8">
                <div class="category-bg" style="background-image: url('https://i.pinimg.com/1200x/da/bd/4d/dabd4d877c76a66b3351ed68d7e084be.jpg');"></div>

                <div class="relative z-10">
                
                    <h3 class="text-2xl font-bold cinzel text-center mb-3 gold-text">Magical Beings</h3>
                    <p class="text-center text-gray-300 mb-6">Summon 2 mystical creatures</p>
                    <div class="flex justify-center">
                        <span class="counter-badge px-6 py-2 rounded-full font-bold" id="magical-count">0/2 Selected</span>
                    </div>
                </div>
            </a>

            <!-- Weapons Card -->
            <a href="./weapons.html" class="category-card rounded-xl p-8">
                <div class="category-bg" style="background-image: url('https://i.pinimg.com/1200x/89/b1/e8/89b1e84e0a18796d50fef5ec9144f85d.jpg');"></div>

                <div class="relative z-10">
                    
                    <h3 class="text-2xl font-bold cinzel text-center mb-3 gold-text">Legendary Weapons</h3>
                    <p class="text-center text-gray-300 mb-6">Equip 2 powerful artifacts</p>
                    <div class="flex justify-center">
                        <span class="counter-badge px-6 py-2 rounded-full font-bold" id="weapon-count">0/2 Selected</span>
                    </div>
                </div>
            </a>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-center items-center gap-6 mt-16">
            <button onclick="goToHomepage()" class="btn-back px-6 py-3 rounded-lg font-bold cinzel text-sm">
                ‚Üê Return Home
            </button>
            <button onclick="enterBattle()" id="battle-btn" class="btn-primary px-12 py-4 rounded-lg font-bold cinzel text-xl">
                NEXT
            </button>
        </div>

        <!-- Squad Summary -->
        <div class="mt-16 max-w-4xl mx-auto bg-gradient-to-br from-gray-900 to-gray-800 border-2 border-blue-800 rounded-xl p-8">
            <h3 class="text-2xl font-bold cinzel text-center mb-6 gold-text">Your Squad</h3>
            <div id="squad-summary" class="grid md:grid-cols-3 gap-6">
                <!-- Will be populated by JS -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-blue-900 py-8 mt-20">
        <div class="container mx-auto px-6 text-center text-gray-400">
            <p class="cinzel">When you play the game of thrones, you win or you die.</p>
            <p class="text-sm mt-2"> &copy; 2025 fyrelordd | All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // Initialize game state from localStorage
        let gameState = JSON.parse(localStorage.getItem('asoiafGameState')) || {
            budget: 100,
            maxBudget: 100,
            squad: {
                characters: [],
                magicalBeings: [],
                weapons: []
            },
            houseCounts: {},
            currentView: 'forge'
        };

        // Save game state
        function saveGameState() {
            gameState.currentView = 'forge';
            localStorage.setItem('asoiafGameState', JSON.stringify(gameState));
        }

        // Update displays
        function updateDisplay() {
            document.getElementById('budget').textContent = gameState.budget;
            document.getElementById('character-count').textContent = 
                `${gameState.squad.characters.length}/3 Selected`;
            document.getElementById('magical-count').textContent = 
                `${gameState.squad.magicalBeings.length}/2 Selected`;
            document.getElementById('weapon-count').textContent = 
                `${gameState.squad.weapons.length}/2 Selected`;
            
            updateSquadSummary();
            updateBattleButton();
        }

        // Update squad summary display
        function updateSquadSummary() {
            const summary = document.getElementById('squad-summary');
            
            const sections = [
                { title: 'Characters', items: gameState.squad.characters, max: 3, icon: 'üëë' },
                { title: 'Magical Beings', items: gameState.squad.magicalBeings, max: 2, icon: 'üêâ' },
                { title: 'Weapons', items: gameState.squad.weapons, max: 2, icon: '‚öîÔ∏è' }
            ];
            
            summary.innerHTML = sections.map(section => `
                <div class="bg-gray-800 rounded-lg p-4 border border-gray-700">
                    <h4 class="font-bold cinzel mb-3 text-blue-300 flex items-center gap-2">
                        <span>${section.icon}</span>
                        <span>${section.title}</span>
                    </h4>
                    ${section.items.length === 0 ? 
                        `<p class="text-gray-500 text-sm italic">None selected</p>` :
                        section.items.map(item => `
                            <div class="bg-gray-900 rounded p-2 mb-2">
                                <p class="text-sm font-semibold">${item.name}</p>
                                <p class="text-xs gold-text">${item.paidPrice || item.price} üí∞</p>
                            </div>
                        `).join('')
                    }
                    <p class="text-xs text-gray-500 mt-2">${section.items.length}/${section.max} selected</p>
                </div>
            `).join('');
        }

        // Update battle button state
function updateBattleButton() {
    const btn = document.getElementById('battle-btn');
    const charactersComplete = gameState.squad.characters.length === 3;
    const magicalComplete = gameState.squad.magicalBeings.length === 2;
    const weaponsComplete = gameState.squad.weapons.length === 2;

    if (charactersComplete && magicalComplete && weaponsComplete) {
        btn.disabled = false;
        btn.textContent = 'NEXT';
    } else {
        btn.disabled = true;
        btn.textContent = 'COMPLETE YOUR SQUAD FIRST';
    }
}

// Navigation / battle entry
function goToHomepage() {
            saveGameState();
            window.location.href = 'index.html';
        }
function enterBattle() {
    // Only triggers if squad is fully complete
    const charactersComplete = gameState.squad.characters.length === 3;
    const magicalComplete = gameState.squad.magicalBeings.length === 2;
    const weaponsComplete = gameState.squad.weapons.length === 2;

    if (!(charactersComplete && magicalComplete && weaponsComplete)) {
        alert('You must complete your full squad (3 characters, 2 magical beings, 2 weapons) before proceeding!');
        return;
    }

    saveGameState();
    // Replace this with actual next page
    window.location.href = 'final.html';
}


        // Initialize on page load
        window.addEventListener('DOMContentLoaded', function() {
            saveGameState();
            updateDisplay();
        });
    </script>
</body>
</html>